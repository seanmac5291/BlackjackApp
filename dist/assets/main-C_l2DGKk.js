(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const u of i)if(u.type==="childList")for(const G of u.addedNodes)G.tagName==="LINK"&&G.rel==="modulepreload"&&l(G)}).observe(document,{childList:!0,subtree:!0});function s(i){const u={};return i.integrity&&(u.integrity=i.integrity),i.referrerPolicy&&(u.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?u.credentials="include":i.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function l(i){if(i.ep)return;i.ep=!0;const u=s(i);fetch(i.href,u)}})();let ee=[],r=[],m=[],p=[[],[]],c=0,S=!1,o=0,f=0,C=[0,0],k=!1,a=1e3,d=0,D=!1,j=!1,Q=!1,O=!1,$,b,P,w,N,W,V,z,n,h,R,B,Y,K,F,I,M,H,T,U;const se=["hearts","diamonds","clubs","spades"],le=["2","3","4","5","6","7","8","9","10","J","Q","K","A"],E={hearts:"♥",diamonds:"♦",clubs:"♣",spades:"♠"};document.addEventListener("DOMContentLoaded",function(){ie()});function ie(){if($=document.getElementById("dealer-cards"),b=document.getElementById("player-cards"),P=document.getElementById("split-cards-1"),w=document.getElementById("split-cards-2"),N=document.getElementById("dealer-points"),W=document.getElementById("player-points"),V=document.getElementById("split-points-1"),z=document.getElementById("split-points-2"),n=document.getElementById("message"),h=document.getElementById("result"),R=document.getElementById("balance"),B=document.getElementById("bet"),Y=document.getElementById("new-game-btn"),K=document.getElementById("hit-btn"),F=document.getElementById("stand-btn"),I=document.getElementById("double-btn"),M=document.getElementById("split-btn"),H=document.getElementById("insurance-btn"),T=document.getElementById("action-buttons"),U=document.getElementById("split-hands-container"),!ae()){console.error("Some game elements could not be found! Check the HTML structure.");return}Y.addEventListener("click",re),K.addEventListener("click",me),F.addEventListener("click",te),I.addEventListener("click",pe),M.addEventListener("click",ye),H.addEventListener("click",ve),console.log("Game initialized successfully"),document.querySelectorAll(".btn").forEach(e=>{e.addEventListener("touchstart",function(){this.style.transform="scale(0.95)"}),e.addEventListener("touchend",function(){this.style.transform="scale(1)"})}),g(),B.max=a}function ae(){return[$,b,N,W,n,h,R,B,Y,K,F,I,M,H,T].every(t=>t!==null)}function oe(){const e=[];for(let t=0;t<6;t++)for(const s of se)for(const l of le)e.push({suit:s,rank:l});return de(e)}function de(e){const t=[...e];for(let s=t.length-1;s>0;s--){const l=Math.floor(Math.random()*(s+1));[t[s],t[l]]=[t[l],t[s]]}return t}function re(){ce(),n.textContent="",h.textContent="";const e=parseInt(B.value);if(isNaN(e)||e<5||e>a){n.textContent=`Please enter a valid bet between $5 and $${a}`;return}d=e,a-=d,g(),ee=oe(),ue(),k=!0,T.classList.remove("hidden"),document.querySelector(".player-own-section").classList.add("active-player"),m[0].rank==="A"?(Q=!0,H.classList.remove("hidden"),n.textContent="Dealer shows an Ace. Insurance available."):n.textContent="Your turn. Hit or Stand?",D=o>=9&&o<=11,D?I.classList.remove("hidden"):I.classList.add("hidden"),j=r.length===2&&J(r[0])===J(r[1]),j&&a>=d?M.classList.remove("hidden"):M.classList.add("hidden"),o===21&&te()}function ce(){r=[],m=[],p=[[],[]],o=0,f=0,C=[0,0],$.innerHTML="",b.innerHTML="",P.innerHTML="",w.innerHTML="",N.textContent="0",W.textContent="0",V.textContent="0",z.textContent="0",h.textContent="",k=!1,S=!1,c=0,D=!1,j=!1,Q=!1,O=!1,document.querySelectorAll(".player-section").forEach(e=>{e.classList.remove("active-player")}),T.classList.add("hidden"),H.classList.add("hidden"),U.classList.add("hidden")}function ue(){const t=window.innerWidth<768?200:300;v(r,b,!1),L(),setTimeout(()=>{v(m,$,!1),_(),setTimeout(()=>{v(r,b,!1),L(),setTimeout(()=>{v(m,$,!0),setTimeout(()=>{fe()},t)},t)},t)},t)}function fe(){if(o===21&&r.length===2){n.textContent="Blackjack! You have 21 with your initial cards.";const e=J(m[0]);e===10||e===11?(n.textContent+=" Checking if dealer has blackjack...",setTimeout(()=>{x()},1e3)):(n.textContent="Blackjack! You win.",A(2.5),y("player blackjack")),T.classList.add("hidden")}}function v(e,t,s){const l=ee.pop();e.push(l);const i=document.createElement("div");if(i.className="card dealing",s)i.classList.add("hidden-card");else{const u=`
            <div class="card-topright ${l.suit}">
                <div class="card-value">${l.rank}</div>
                <div class="card-suit">${E[l.suit]}</div>
            </div>
            <div class="card-suit card-center ${l.suit}">${E[l.suit]}</div>
            <div class="card-bottomleft ${l.suit}">
                <div class="card-value">${l.rank}</div>
                <div class="card-suit">${E[l.suit]}</div>
            </div>
        `;i.innerHTML=u}return t.appendChild(i),requestAnimationFrame(()=>{setTimeout(()=>{i.classList.remove("dealing"),i.classList.add("dealt")},10)}),i}function q(e){let t=0,s=0;for(const l of e)l.rank==="A"?(s+=1,t+=11):["K","Q","J"].includes(l.rank)?t+=10:t+=parseInt(l.rank);for(;t>21&&s>0;)t-=10,s-=1;return t}function J(e){return e.rank==="A"?11:["K","Q","J"].includes(e.rank)?10:parseInt(e.rank)}function L(){S?(C[0]=q(p[0]),C[1]=q(p[1]),V.textContent=C[0],z.textContent=C[1]):(o=q(r),W.textContent=o)}function _(){const e=m.filter((t,s)=>s===0||!k);f=q(e),N.textContent=f}function me(){if(k)if(I.classList.add("hidden"),M.classList.add("hidden"),S){const e=p[c];v(e,c===0?P:w,!1),L(),C[c]>21?(n.textContent=`Hand ${c+1} busts!`,c===0?(c=1,n.textContent+=" Moving to Hand 2.",document.querySelectorAll(".split-hand")[0].style.opacity="0.7",document.querySelectorAll(".split-hand")[1].style.opacity="1"):setTimeout(()=>{x()},1e3)):C[c]===21&&(n.textContent=`Hand ${c+1} has 21! Perfect!`,c===0?(c=1,setTimeout(()=>{n.textContent="Moving to Hand 2.",document.querySelectorAll(".split-hand")[0].style.opacity="0.7",document.querySelectorAll(".split-hand")[1].style.opacity="1"},1e3)):setTimeout(()=>{x()},1e3))}else v(r,b,!1),L(),o>21?(n.textContent="Bust! You lose.",y("dealer")):o===21&&(n.textContent="You have 21! Perfect!",setTimeout(()=>{x()},1e3))}function te(){if(k){if(S&&c===0){c=1,n.textContent="Moving to Hand 2.",document.querySelectorAll(".split-hand")[0].style.opacity="0.7",document.querySelectorAll(".split-hand")[1].style.opacity="1";return}x()}}function pe(){!k||!D||a<d||(a-=d,d*=2,g(),n.textContent=`Doubled down for a total bet of $${d}`,v(r,b,!1),L(),o>21?(n.textContent="Bust! You lose.",y("dealer")):setTimeout(()=>{x()},1e3))}function ye(){if(!k||!j||a<d)return;a-=d,g(),S=!0,U.classList.remove("hidden"),b.innerHTML="",p[0].push(r[0]),p[1].push(r[1]),r=[];const e=Z(p[0][0]),t=Z(p[1][0]);P.appendChild(e),w.appendChild(t),setTimeout(()=>{v(p[0],P,!1),L(),document.querySelectorAll(".split-hand")[0].style.opacity="1",document.querySelectorAll(".split-hand")[1].style.opacity="0.7",C[0]===21?(n.textContent="Blackjack on Hand 1! Moving to Hand 2.",c=1,document.querySelectorAll(".split-hand")[0].style.opacity="0.7",document.querySelectorAll(".split-hand")[1].style.opacity="1",setTimeout(()=>{v(p[1],w,!1),L(),C[1]===21&&(n.textContent="Blackjack on both hands!",setTimeout(()=>{x()},1e3))},500)):setTimeout(()=>{v(p[1],w,!1),L()},500)},500),n.textContent="Pair split into two hands. Now playing Hand 1."}function ve(){if(!Q||O||a<d/2)return;const e=d/2;a-=e,g(),O=!0,H.classList.add("hidden"),n.textContent=`Insurance taken for $${e}.`,(m[1].rank==="A"||["10","J","Q","K"].includes(m[1].rank))&&(ne(),n.textContent="Dealer has Blackjack! Insurance pays 2:1.",a+=e*3,g(),o===21&&r.length===2&&(n.textContent+=" Your Blackjack pushes.",a+=d,g()),y("dealer blackjack"))}function x(){k=!1,T.classList.add("hidden"),H.classList.add("hidden"),document.querySelectorAll(".player-section").forEach(i=>{i.classList.remove("active-player")}),document.querySelector(".dealer-section").classList.add("active-player"),ne();const e=window.innerWidth<768,t=e?600:800,s=e?700:1e3,l=()=>{f<17?setTimeout(()=>{v(m,$,!1),_(),l()},t):he()};setTimeout(()=>{l()},s)}function ne(){const e=$.querySelector(".hidden-card");e&&(e.classList.add("flipping"),setTimeout(()=>{e.classList.remove("hidden-card","flipping");const t=m[1],s=`
                <div class="card-topright ${t.suit}">
                    <div class="card-value">${t.rank}</div>
                    <div class="card-suit">${E[t.suit]}</div>
                </div>
                <div class="card-suit card-center ${t.suit}">${E[t.suit]}</div>
                <div class="card-bottomleft ${t.suit}">
                    <div class="card-value">${t.rank}</div>
                    <div class="card-suit">${E[t.suit]}</div>
                </div>
            `;e.innerHTML=s,_()},300))}function he(){S?(X(0),X(1)):o>21?(n.textContent="You busted! Dealer wins.",y("dealer")):f>21?(n.textContent="Dealer busts! You win.",A(2),y("player")):o===21&&r.length===2&&(f!==21||m.length>2)?(n.textContent="Blackjack! You win.",A(2.5),y("player blackjack")):f===21&&m.length===2&&(o!==21||r.length>2)?(n.textContent="Dealer has Blackjack! You lose.",y("dealer blackjack")):o>f?(n.textContent="You win!",A(2),y("player")):o<f?(n.textContent="Dealer wins!",y("dealer")):(n.textContent="Push! Bet returned.",a+=d,g(),y("push"))}function X(e){const t=C[e];t>21?h.textContent+=`Hand ${e+1}: Bust. `:f>21?(h.textContent+=`Hand ${e+1}: Win (dealer busts). `,A(2,e)):t>f?(h.textContent+=`Hand ${e+1}: Win. `,A(2,e)):t<f?h.textContent+=`Hand ${e+1}: Lose. `:(h.textContent+=`Hand ${e+1}: Push. `,a+=d,g())}function A(e,t=-1){const s=d*e;if(a+=s,g(),t===-1){const l=s-d;h.textContent=`You won $${l}!`}}function y(e){k=!1,T.classList.add("hidden"),Y.classList.remove("hidden"),console.log(`Game ended with result: ${e}`)}function Z(e){const t=document.createElement("div");t.className="card";const s=`
        <div class="card-topright ${e.suit}">
            <div class="card-value">${e.rank}</div>
            <div class="card-suit">${E[e.suit]}</div>
        </div>
        <div class="card-suit card-center ${e.suit}">${E[e.suit]}</div>
        <div class="card-bottomleft ${e.suit}">
            <div class="card-value">${e.rank}</div>
            <div class="card-suit">${E[e.suit]}</div>
        </div>
    `;return t.innerHTML=s,t}function g(){R.textContent=a,B.max=a,parseInt(B.value)>a&&(B.value=a)}
